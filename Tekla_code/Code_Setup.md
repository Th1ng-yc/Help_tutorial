

## 一、Tekla 用户单元

### Step 1 算数运算符

|运算符|描述|说明|
|:----|:----|:----|
|`fTpl("LENGTH",ID)`|返回具有给定对象 ID的模板属性的长度值。|`fTpl("LENGTH",6872)`返回ID为6872的对象的长度|
|`dist_between_elem`|长度| |
|`number_of_arrays`|数量| |
|`+`|加|也用于创建参数字符串|
|`-`|减| |
|`*`|乘|乘比除快 `=D1*0.5比=D1/2` 快|
|`/`|除| |
---

### Setp 2 逻辑语句

|运算符|描述|示例|
|:----|:----|:----|
|`&&`|逻辑与两个条件都必须为真|`=if (D1==200 && D2<40) then 6 else 0 endif` 如果D1为200并且D2小于40,则结果为6，否则为0|
|\|\||逻辑或只需一个条件为真|=if(D1==200 \|\| D2<40) then 6 else 0 endif 如果D1为200或D2小于40，则结果为6，否则为0|
---
### Setp 3 参考函数

|函数|描述|示例|
|:----|:----|:----|
|`fTpl("templateattribute", "object ID")`|"返回具有给定对象 ID的模板属性的值。|`fTpl("WEIGHT","6290")`返回 ID 为 6290 的对象的重量。|
|`fP("user-definedattribute", "objectID"`)|返回具有给定对象 ID的用户定义属性的值。|`fP("comment", "741")`返回 ID 为 741 的对象的用户定义属性评注。|
|`fValueOf("parameter")`|返回参数的值。|如果等式为 `=P2+"*"+P3`,则结果为`P2*P3`对于`=fValueOf("P2")+"*"+fValueOf("P3")`.其中`P2=780,P3=480`，结果为`780*480`
---

### Setp 4 数学函数

|函数|描述|示例|
|:----|:----|:----|
|`fabs(参数)`|返回参数的绝对值|`fabs(D1)` 返回 15 如果 D1 = -15|
|`exp(幂)`|返回 e 的幂e 为欧拉数|`exp(D1)` 返回 7.39 如果 D1 = 2|
|`ln(参数)`|返回参数的自然对数（基数为 e）|`ln(P2)` 返回 2.71 如果 P2 = 15|
|`log(参数)`|返回参数的对数（基数为10）|`log(D1)` 返回 2 如果 D1=100|
|`sqrt(参数)`|返回参数的平方根|`sqrt(D1)` 返回 4 如果 D1 = 16|
|`mod(被除数, 除数`)|返回相除的余数|`mod(D1, 5)` 返回 1 如果 D1 = 16|
|`pow(基数, 幂`)|返回基数的指定次幂|`pow(D1, D2)` 返回 9 如果 D1 = 3 且 D2 = 2|
|`hypot(边 1,边 2)`|勾股定律返回斜边|`hypot(D1, D2)` 返回 5 如果 D1 = 3 且D2 = 4|
|`n!(参数)`|返回参数的阶乘|`n!(P2)` 返回 24 如果 `P2=4(1*2*3*4)`|
|`round(参数, 精确度)`|返回参数舍入到给定精确度后的值|`round(P1, 0.1)` 返回 10.600 如果 P1 = 10.567"
---

### Setp 5 统计函数

|函数|描述|示例 (P1 = 1.4 P2 = 2.3)|
|:----|:----|:----|
|`ceil()`|返回大于或等于参数的最小整数|ceil(P1) 返回 2|
|`floor()`|返回小于或等于参数的最大整数|floor(P1) 返回 1
|`min()`|返回最小的参数|min(P1, P2) 返回 1.4
|`max()`|返回最大的参数|max(P1, P2) 返回 2.3
|`sum()`|参数合计|sum(P1, P2) 返回 3.7
|`sqsum()`|参数平方合计：(参数 1)² +(参数 2)²|sqsum(P1, P2) 返回 7.25
|`ave()`|参数的平均数|ave(P1, P2) 返回 1.85
|`sqave()`|参数平方的平均数|sqave(P1, P2) 返回 3.625
---

### Setp 6 数据类型转换函数

|函数|描述|示例|
|:----|:----|:----|
|`int()`|将数据转换为整数|对计算截面型材尺寸尤为有用：`int(1.00.0132222000) `返回100|
|`double()`|将数据转换为双精度数|
|`string()`|将数据转换为字符串|
|`imp()`|将英制单位转换为毫米。在计算中使用此函数而不使用英制单位。不能直接在计算中使用英制单位|`imp (1,1,1,2)` 意味着 1 英尺 1 1/2 英寸会返回 342.90 mm imp(1,1,2) 意味着 1 1/2 英寸会返回 38.10 mm imp(1,2) 意味着 1/2 英寸会 返回 12.70 mm imp(1) 意味着 1 英寸会返回 25.40 mm =3’/3"" 不正确，但 =imp(36)/imp(3) 是正确的|
|`vwu(值, 单位)`|将长度值转换为毫米，角度值转换为度。可用单位有：<br/>•"ft" ("feet", "foot")<br/>•"in"("inch","inches")<br/> •"m"<br/>•"cm"<br/>•"mm"<br/>•"rad"<br/>•"deg"|vwu(4.0, ""in"") 返回 101.6mm<br/>vwu(2.0, ""rad"") 返回 114.59度|
---

### Setp 7 三角函数

|函数|描述|示例 (d 表示度,r 表示弧度（默认）)|
|:----|:----|:----|
|`sin()`|返回正弦值|sin(d45) 返回 0.71
|`cos()`|返回余弦值|cos(d45) 返回 0.71
|`tan()`|返回正切值|tan(d45) 返回 1.00
|`asin()`|sin() 的反函数，返回以弧度为单位的值|asin(d45) 返回 0.90
|`acos()`|cos() 的反函数，返回以弧度为单位的值|acos(d45) 返回 0.67
|`atan()`|tan() 的反函数，返回以弧度为单位的值|atan(d45) 返回 0.67
|`sinh()`|返回双曲正弦值|sinh(d45) 返回 0.87
|`cosh()`|返回双曲余弦值|cosh(d45) 返回 1.32
|`tanh()`|返回双曲正切值|tanh(d45) 返回 0.66
|`atan2()`|返回正切为两个数字之商的角度。返回以弧度为单位的值|atan2(1,3) 返回 0.32|
---

### Setp 8 市售尺寸函数

|函数|描述|示例|
|:----|:----|:----|
|`fMarketSize(材料,厚度, 外加步长)`|根据指定的厚度返回 marketsize.dat 文件中的材料可用的下一个市售尺寸。<br/> 文件必须位于`~\environments\your_environment\profil`文件夹或系统文件夹中。对于外加步长，请输入一个数字定义下一个尺寸的增量（默认值为 0)|`fMarketSize("S235JR", 10, 0)`|

### Setp 9 边框条件函数

|函数|描述|示例|
|:----|:----|:----|
|`fAD("skew",ID)`|返回具有给定 ID 的次零件的歪斜角度。|`fAD("skew", 12345)` 返回 45 12345 是次零件的 ID，该次零件与主零件之间呈 45 度角。|
|`fAD("slope",ID)`|返回具有给定 ID 的次零件的倾斜角度。|fAD("slope", 12345)|
|`fAD("cant",ID)`|返回具有给定 ID 的旋转次零件的斜面角度。|fAD("cant", 12345)|
---

### Setp 10 字符串函数 [回到顶部](#readme)

|函数|描述|示例 (P1="PL100*10")|
|:----|:----|:----|
|`match(参数 1,参数 2)`|如果参数相等则返回 1，否则返回 0。您还可以将通配符 *、? 和 [] 用在 match 函数中。|`match(P1, "PL100*10")` 返回 1 接受以 PFC 开头的所有截面型材：`match(P4, "PFC*")` 接受以 PFC 开头并且高度以 2、3、4 或 5 开头的截面型材：`match(P4, "PFC[2345]*")`接受以 PFC 开头、高度为 200、300、400 或 500 并且宽度以 7 开头的截面型材：`match(P4, "PFC[2345]00?7")`|
|`length(参数)`|返回参数中的字符数。|`length(P1)` 返回 8|
|`find(参数, 字符串)`|返回指定字符串的次序编号（从零开始），如果从参数中未找到指定字符串，则返回 -1|`find(P1, "*")` 返回 5|
|`getat(参数,n)`|返回参数中的第 n 个（从零开始）字符。|`getat(P1, 1)` 返回“L”|
|`setat(参数,n, 字符)`|将参数中的第 n 个（从零开始）字符设置为指定字符。|`setat(P1, 0, "B")` 返回“BL100*10”|
|`mid(字符串,n, x)`|返回从第 n 个（从零开始）字符开始的字符串的 x 个字符。如果不设置最后一个参数 (x)，则返回字符串的最后部分。|`mid(P1,2,3)` 返回“100”|
|`reverse(字符串)`|反转给定字符串。|`reverse(P1)` 返回“01*001LP”|
---

